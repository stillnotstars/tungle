<!DOCTYPE html>
<html>
<head>

<title>{Title}</title>

<link rel="shortcut icon" href="{Favicon}">
<link rel="alternate" type="application/rss+xml" href="{RSS}">

{block:Description}
    <meta name="description" content="{MetaDescription}" />
{/block:Description}

<meta name="if:Show Avatar" content="" />
<meta name="image:Background Image" content="">
<meta name="color:Background" content="#a084b4" />
<meta name="color:Text" content="#000" />
<meta name="color:Post Background" content="#fff" />
<meta name="color:Links" content="#4f156a" />
<meta name="color:Bubbles" content="#e6c7f1" />
<meta name="color:Bubble Text" content="#000">
<meta name="color:Bubble Links" content="#3b0a51">
<meta name="color:Scrollbar Background" content="#fff" />
<meta name="color:Scrollbar" content="#89ccd1" />
<meta name="if:Show Search" content="1">
<meta name="if:Show Archive" content="" />
<meta name="select:Font" content="Helvetica" />
<meta name="select:Font" content="Georgia" />
<meta name="select:Font" content="Verdana" />
<meta name="if:Show Blocklist" content="1" />
<meta name="text:Blocklist Terms" content="write the tags you use for tagging stuff seperated by commas, punctuation unnecessary">
<meta name="if:Show Alt Text" content="1" />

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style type="text/css">

body {
    font-family: {select:font};
    background: {color:background} url("{image:background image}");
    margin: 0;
}

.post {
    width: 50%;
    max-width: 500px;
    min-width: 400px;
    margin: 0 auto 150px;
    padding: 10px;
}

#notes {
    background-color: {color:post background};
    padding: 1px 10px 10px 10px;
    width: 50%;
    max-width: 500px;
    min-width: 400px;
    margin: 0 auto 150px;
}

.postinfo {
    display: grid;
    grid-template-columns: 1fr 60px;
}

.box {
    border: 1px solid #000;
    border-radius: 5px;
    background-color: {color:post background};
}

#search {
    font-size: 20px;
    padding: 5px;
    font-family: Verdana;
    width: 70%;
}

#search:focus {
    border: 2px dashed {color:links};
}

a {
    color: {color:links};
}

h1 {
    margin-top: 0;
}

blockquote {
    border-left: 1px solid black;
    margin-left: 5px;
    margin-right: 0;
    padding-left: 15px;
}

header {
    font-size: 22px;
    background-color: white;
    border: 0;
    position: fixed;
    width: 25%;
    min-width: 250px;
    border-right: 1px solid black;
}

main {
    overflow: auto;
    padding-left: max(250px, 25%);
    padding-top: 100px;
    font-size: 20px;
}

#notbl {
    {block:ifshowblocklist}
        height: calc(60vh - 40px);
    {/block:ifshowblocklist}
    padding: 30px;
    padding-bottom: 0;
    overflow-y: auto;
    overflow-x: hidden;
    padding-bottom: 10px;
}

{block:ifshowblocklist}
#blocklist {
    overflow-y: auto;
    background: #fff;
    font-size: 20px;
    padding: 30px;
    padding-bottom: 0;
    height: calc(40vh - 31.6px);
    border-top: 2px #aaa dashed;
}

#blocklist h2 {
    font-size: 24px;
    margin: 0;
}

#blocklistbutton {
    font-size: 20px;
    width: 150px;
    display: block;
    margin: auto;
    text-align: center;
    padding: 5px;
    margin: 0 auto 30px;
    border: 5px solid #eee;
    border-radius: 0;
    font-family: {select:font};
}
{/block:ifshowblocklist}


@media only screen and (max-width: 800px) {
    #notbl {
        height: auto;
    }

    {block:ifshowblocklist}
    #blocklist {
        height: auto;
    }
    {/block:ifshowblocklist}

    header {
        width: 100%;
        border-right: 0;
        position: static;
        border-bottom: 1px solid black;
    }
    
    main {
        padding-left: 0;
    }

    .post, #notes {
        width: 80%;
        min-width: 0;
    }
}

#profileicon {
    display: grid;
    place-items: center;
    margin-bottom: 20px;
}

#profileicon img {
    border-radius: 50%;
    width: auto;
    height: auto;
}

#title {
    margin: 0;
    font-size: 30px;
    line-height: 120%;
    margin-bottom: 10px;
}

nav {
    margin-top: 10px;
    margin-left: 10px;
    font-size: 22px;
}

nav a {
    text-decoration: none;
}

label p {
    margin: 0;
}

.explainbl {
    display: none;
}

.pagination-icon {
    color: #888;
    background-color: {color:post background};
    width: 1em;
    height: 1em;
    flex: 0 1;
    margin: 5px;
}

.pagination-icon a {
    color: {color:links};
    text-decoration: none;
}

.pagination {
    margin-bottom: 70px;
    justify-content: center;
    display: flex;
}

.tags {
    padding: 5px;
    margin-bottom: 10px;
    background-color: {color:bubbles};
    color: {color:bubble text};
    border-radius: 5px;
}

.tags a {
    color: {color:bubble links};
}

.sr-only {
    position: absolute;
    clip: rect(1px, 1px, 1px, 1px);
    overflow: hidden;
}

.sr-only.firstnav {
    top: 50px;
    left: 40%;
}

.focusable:focus {
    clip: auto;
    width: auto;
    height: auto;
    overflow: auto;
    font-size: 22px;
    z-index: 10000000;
}

:focus {
    outline: dashed {color:links};
    background-color: {color:post background};
    color: {color:text};
    text-decoration: none;
}

.question {
    padding: 5px;
    margin-bottom: 10px;
    border-radius: 5px;
    background-color: {color:bubbles};
    color: {color:bubble text};
}

.questions a {
    color: {color:bubble links};
}

.odd {
    background-color: {color:bubbles};
    color: {color:bubble text};
    border-radius: 5px;
}

.odd a {
    color: {color:bubble links};
}

#navdescription {
    font-size: 21px;
    border-bottom: 3px solid #888;
}

#notes ol {
    list-style: none;
}

.avatar:not(.post) {
    width: 24px;
    height: 24px;
    margin-right: 7px;
}

img {
    width: 100%;
    height: 100%;
}

::-webkit-scrollbar {
    width: 6px;
    height: 6px;
    border-radius: 3px;
    background-color: {color:scrollbar background};
}

::-webkit-scrollbar-thumb {
    background-color: {color:scrollbar};
    border-radius: 3px;
}

hr {
    border: 2px solid #eee;
}
</style>
</head>
<body>
<div id="theme-wrapper">
<header>

<div id="notbl">
    {block:ifshowavatar}<div id="profileicon"><a href="/"><img src="{PortraitURL-96}" alt="click to go to index" /></a></div>{/block:ifshowavatar}
    
    {block:ifnotshowavatar}<a style="text-decoration: none;" href="/">{/block:ifnotshowavatar}<h1 id="title">{Title}</h1>{block:ifnotshowavatar}</a>{/block:ifnotshowavatar}
    
    <div style="font-size: 20px;">{Description}</div>
    
    <nav>
        {block:HasPages}{block:Pages}<div><i class="fa fa-star-o"></i> <a href="{URL}">{Label}</a></div>{/block:Pages}{/block:HasPages}
        {block:AskEnabled}<div><i class="fa fa-star-o"></i> <a href="/ask">{AskLabel}</a></div>{/block:AskEnabled}
        {block:SubmissionsEnabled}<div><i class="fa fa-star-o"></i> <a href="/submit">{SubmitLabel}</a></div>{/block:SubmissionsEnabled}
        {block:ifshowarchive}<div><i class="fa fa-star-o"></i> <a href="/archive">Archive</a></div>{/block:ifshowarchive}
    </nav>
    
    {block:ifshowsearch}
    <form action="/search" style="margin-top: 10px;" method="get">
        <i class="fa fa-search" aria-hidden="true"></i> <input type="text" id="search" name="q" value="{SearchQuery}" placeholder="Search..."/>
    </form>
    {/block:ifshowsearch}
    
    <div style="font-size: 18px; margin-top: 15px; margin-bottom: 30px;">
        <a href="https://github.com/stillnotstars/tungle">Theme Credit</a>
    </div>

</div>

{block:ifshowblocklist}
<div id="blocklist">
    <h2>Blocklist</h2>
    <a class="sr-only focusable" style="padding: 10px;" href="#main">skip blocklist</a>
    <div id="blterms">
    </div>
    <br>
    <button id="blocklistbutton" class="box">block</button>
</div>
{/block:ifshowblocklist}

</header>


<main id="main">

{block:SearchPage}
    {block:nosearchresults}
        <div class="post box">
            <h3>No Posts Found</h3>
        </div>
    {/block:nosearchresults}
{/block:SearchPage}

{block:Posts}
    <div class="post box {TagsAsClasses}">
        <div class="explainbl">
            <p>This post has been hidden because it was tagged: <span class="inserttag"></span>. <a href="{Permalink}">Click here to view it</a>.</p>
            {block:HasTags}<p>Click here to <a class="showtags" href="#">see the tags</a>.</p>
            <p class="tags">{block:Tags}<a href="{TagURL}">#{Tag}</a> {/block:Tags}</p>{/block:HasTags}
        </div>

        {block:Text}<div class="postbody">
            <h2 class="sr-only">Text post: </h2>
            {block:HasTags}<div class="tags">Tagged: {block:Tags} <a href="{TagURL}">#{Tag}</a> {/block:Tags}</div>{/block:HasTags}
            {block:Title}<h2><a href="{Permalink}">{Title}</a></h2>{/block:Title}
            <div class="postcontent">{block:Reblogs}<a class="tumblr_blog" href="{Permalink}">{Username}</a>{Body}
            <hr>{/block:Reblogs}
            {block:NotReblog}{Body}{/block:NotReblog}
        {/block:Text}
        
        {block:Photo}<div class="postbody">
            <h2 class="sr-only">Photo post: </h2>
            {block:HasTags}<div class="tags">Tagged: {block:Tags} <a href="{TagURL}">#{Tag}</a> {/block:Tags}</div>{/block:HasTags}
            {LinkOpenTag}<img src="{PhotoUrl-400}" alt>{LinkCloseTag}
            <div class="postcontent">{block:Caption}{Caption}{/block:Caption}
        {/block:Photo}
        
        {block:Photoset}<div class="postbody">
            <h2 class="sr-only">Photoset: </h2>
            {block:HasTags}<div class="tags">Tagged: {block:Tags} <a href="{TagURL}">#{Tag}</a> {/block:Tags}</div>{/block:HasTags}
            {Photoset}
            <div class="postcontent">{block:Caption}{Caption}{/block:Caption}
        {/block:Photoset}
        
        {block:Quote}<div class="postbody">
            <h2 class="sr-only">Quote: </h2>
            {block:HasTags}<div class="tags">Tagged: {block:Tags} <a href="{TagURL}">#{Tag}</a> {/block:Tags}</div>{/block:HasTags}
            <h2>"{Quote}"</h2>
            {block:Source}<div class="postcontent">{Source}{/block:Source}
        {/block:Quote}
        
        {block:Link}<div class="postbody">
            <h2 class="sr-only">Link post: </h2>
            {block:HasTags}<div class="tags">Tagged: {block:Tags} <a href="{TagURL}">#{Tag}</a> {/block:Tags}</div>{/block:HasTags}
            <h2><a href="{URL}" {Target}>{Name}</a> <i class="fa fa-external-link"></i></h2>
            <div>
            {block:Description}<div class="postcontent">{Description}</div>{/block:Description}
        {/block:Link}
        
        {block:Chat}<div class="postbody">
            <h2 class="sr-only">Chat post: </h2>
            {block:HasTags}<div class="tags">Tagged: {block:Tags} <a href="{TagURL}">#{Tag}</a> {/block:Tags}</div>{/block:HasTags}
            {block:Title}<h2><a href="{Permalink}">{Title}</a></h2>{/block:Title}
            <div class="postcontent">
                {block:Lines}
                    <div class="{Alt}">{block:Label}<b>{Label}</b>{/block:Label} {Line}</div>
                {/block:Lines}
        
        {/block:Chat}
        
        {block:Video}<div class="postbody">
            <h2 class="sr-only">Video post: </h2>
            {block:HasTags}<div class="tags">Tagged: {block:Tags} <a href="{TagURL}">#{Tag}</a> {/block:Tags}</div>{/block:HasTags}
            {Video-400}
            {block:Caption}<div class="postcontent">{Caption}{/block:Caption}
        {/block:Video}
        
        {block:Audio}<div class="postbody">
            <h2 class="sr-only">Audio post: </h2>
            {block:HasTags}<div class="tags">Tagged: {block:Tags} <a href="{TagURL}">#{Tag}</a> {/block:Tags}</div>{/block:HasTags}
            <div style="height: 85px; overflow: hidden;">{AudioEmbed}</div>
            {block:Caption}<div class="postcontent">{Caption}{/block:Caption}
        {/block:Audio}
        
        {block:Answer}<div class="postbody">
            <h2 class="sr-only">Ask post:</h2>
            {block:HasTags}<div class="tags">Tagged: {block:Tags} <a href="{TagURL}">#{Tag}</a> {/block:Tags}</div>{/block:HasTags}
            <div class="question"><em>{Asker} asked:</em><br>{Question}</div>
            <div class="postcontent">
            {block:Answerer}
                <div>{Answerer}: </div>
                <div>{Answer}</div>
            {/block:Answerer}
        
                {Replies}
        {/block:Answer}
        
        {block:IndexPage}{block:More}<a href="{Permalink}">Read more ></a>{/block:More}{/block:IndexPage}</div>

        <div class="postinfo">
            <div>
                <div>{block:Date}{TimeAgo}{/block:Date} / {NoteCount} notes / <a href="{Permalink}">Permalink</a></div>
                {block:RebloggedFrom}<div>reblogged from: <a href="{ReblogParentURL}">{ReblogParentName}</a> / source: <a href="{ReblogRootURL}">{ReblogRootName}</a></div>{/block:RebloggedFrom}
            </div>
            <div style="display: flex;">
                <div style="flex: 0 1; margin: 5px;">
                    <span class="sr-only">like button: </span>{LikeButton}
                </div>
                <div style="flex: 0 1; margin: 5px;">
                    <span class="sr-only">reblog button: </span>{ReblogButton}
                </div>
            </div>
        </div>
    </div>
    </div>

{/block:Posts}

{block:PostNotes}
    <div id="notes" class="box">
        {PostNotes}
    </div>
{/block:PostNotes}

{block:IndexPage} <!-- this is really nightmarish pls trust me -->
    <div class="pagination">
        <div class="pagination-icon">
            {block:Pagination}{block:PreviousPage}<a href="{PreviousPage}">{/block:PreviousPage}{/block:Pagination}
                ←
            {block:Pagination}{block:PreviousPage}</a>{/block:PreviousPage}{/block:Pagination}
        </div>

        <div class="pagination-icon">
            {block:Pagination}{block:NextPage}<a href="{NextPage}">{/block:NextPage}{/block:Pagination}
                →
            {block:Pagination}{block:NextPage}</a>{/block:NextPage}{/block:Pagination}
        </div>
    </div>
{/block:IndexPage}

</main>
</div>

<script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script type="text/javascript">
{block:ifshowblocklist}
    function declass(tag){
        return tag.replace(/\_/g, ' ').replace(/\./g, '');
    };
    
    function reclass(tag){
        return tag.replace(/\ /g, '_');
    };
    
    function block(texttoblock) {
        $(texttoblock + " .inserttag").append(" #" + declass(texttoblock));
        $(texttoblock + " .postbody").hide();
        $(texttoblock + " .tags").hide();
        $(texttoblock + " .explainbl").show();
    };
{/block:ifshowblocklist}
    
    $(document).ready(function() {
        {block:ifshowblocklist}
        var blocktags = "{text:blocklist terms}".split(', ');
        for (var i = 1; i <= blocktags.length; i++) {
            $("#blterms").append('<label><p><input type="checkbox" id="bl' + i + '"> <span id="labelbl' + i + '">' + blocktags[i - 1] + '</span></p></label>');
        }

        $("#blocklistbutton").click(function() {
            $('.postbody').show();
            $('.postinfo').show();
            $('.inserttag').html('');
            $('.tags').show();
            $('.explainbl').hide();
            var x = 0;
            for (var i = 1; i <= blocktags.length; i++) {
                var checked = $("#bl" + i).is(':checked');
                if (checked) {
                    blocktags[x] = reclass($("#labelbl" + i).html());
                    x++;
                }
            }
            
            //1 = true, 0 = false...
            for (var i = 0; i < x; i++) {
                block("." + blocktags[i]);
            }
        });
        
        $(".showtags").click(function(e) {
            e.preventDefault();
            $(this).parent().next().toggle();
        });
        {/block:ifshowblocklist}
        
        {block:ifshowalttext}
        $("img").each(function() {
            var alt = $(this).attr("alt");
            if (alt != "") {
                $(this).attr("title", alt);
            }
        });
        {/block:ifshowalttext}

    });
</script>
</body>
